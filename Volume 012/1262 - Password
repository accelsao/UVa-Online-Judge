#include<iostream>
#include<cmath>
#include<algorithm>
#include<cstring>
#include<cstdio>
#include<cstdlib>
#include<queue>
#include<string>
#include<vector>
using namespace std;


vector<char>a[5];
vector<char>v[5];
int p[6];
char ans[5];
int main(){
	p[5] = 1;
	int t,k;
	cin >> t;
	while (t--){
		for (int i = 0; i < 5; i++)
			a[i].clear(), v[i].clear();

		char n;
		cin >> k;
		for (int i = 0; i < 6; i++)
			for (int j = 0; j < 5; j++){
				cin >> n;
				a[j].push_back(n);
			}
		for (int i = 0; i < 6; i++)
			for (int j = 0; j < 5; j++){
				cin >> n;
				if (find(a[j].begin(), a[j].end(), n) != a[j].end() && !(find(v[j].begin(), v[j].end(), n) != v[j].end()))
					v[j].push_back(n);
			}

		for (int i = 0; i < 5; i++){
			p[i] = v[i].size();
			sort(v[i].begin(), v[i].end());
		}
			int d = 1;
			for (int i = 0; i < 5; i++)d *= p[i];

			if (k>d)puts("NO");
			else{
				d /= p[0];
				for (int i = 0; i < 5; i++){
					ans[i] = v[i][(k - 1) / d];
					k = (k - 1) % d + 1;
					d /= p[i + 1];
				}
				for (int i = 0; i < 5; i++)
					putchar(ans[i]);
				puts("");
			}
	}

}
