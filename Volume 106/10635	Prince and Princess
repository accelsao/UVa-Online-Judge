
#include<iostream>
#include<algorithm>
#include<map>
#include<string>
#include<cstdio>
#include<queue>
#include<cmath>
#include<stack>
#include<sstream>
using namespace std;



int main(){
	int t;
	cin >> t;
	for (int i = 1; i <= t;i++){
		int n, p, q;
		cin >> n >> p >> q;
		p++, q++;
		int pos[100001] = {};
		int a;
		for (int i = 1; i <= p; i++){
			cin >> a;
			pos[a] = i;
		}
		vector<int>v;
		v.push_back(-1);
		for (int i = 1; i <= q; i++){
			cin >> a;
			int n = pos[a];
			if (n > v.back())v.push_back(n);
			else
				*lower_bound(v.begin(), v.end(), n) = n;
		}
		printf("Case %d: ",i);
		cout << v.size() - 1<<endl;
	}
}
